<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CMST_TBL_APP_MARKETING_TOOL_USEDTL" >
  <resultMap id="abatorgenerated_TblAppMarketingToolUsedtlResult" class="cmt.getData.po.TblAppMarketingToolUsedtl" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Sep 05 12:46:58 CST 2013.
    -->
    <result column="TRANS_BAT_NO" property="transBatNo" jdbcType="CHAR" />
    <result column="BUSSINESS_ACCEPT_CHANNEL" property="bussinessAcceptChannel" jdbcType="CHAR" />
    <result column="SYSTEM_CHANNEL" property="systemChannel" jdbcType="CHAR" />
    <result column="TRANS_CODE" property="transCode" jdbcType="CHAR" />
    <result column="TRANS_TYPE" property="transType" jdbcType="CHAR" />
    <result column="ACT_NO" property="actNo" jdbcType="CHAR" />
    <result column="CUPONS_NO" property="cuponsNo" jdbcType="CHAR" />
    <result column="PROD_TYPE" property="prodType" jdbcType="CHAR" />
    <result column="PAR_REBATE_PROP" property="parRebateProp" jdbcType="CHAR" />
    <result column="ORDER_AMT" property="orderAmt" jdbcType="CHAR" />
    <result column="USE_AMT" property="useAmt" jdbcType="CHAR" />
    <result column="MOBILE_NO" property="mobileNo" jdbcType="CHAR" />
    <result column="INNER_USER_NO" property="innerUserNo" jdbcType="CHAR" />
    <result column="MER_ID" property="merId" jdbcType="CHAR" />
    <result column="INNER_ORDER_NO" property="innerOrderNo" jdbcType="CHAR" />
    <result column="ACCOUNT_DT" property="accountDt" jdbcType="CHAR" />
    <result column="TRANS_SYS_DT" property="transSysDt" jdbcType="CHAR" />
    <result column="TRANS_SYS_TM" property="transSysTm" jdbcType="CHAR" />
    <result column="TRANS_STA" property="transSta" jdbcType="CHAR" />
    <result column="FINACE_TYPE" property="finaceType" jdbcType="CHAR" />
    <result column="USE_MARK" property="useMark" jdbcType="CHAR" />
    <result column="USR_PROV" property="usrProv" jdbcType="CHAR" />
    <result column="ORIG_CUP_NO" property="origCupNo" jdbcType="CHAR" />
    <result column="ORIG_RECP" property="origRecp" jdbcType="CHAR" />
    <result column="TERM_ID" property="termId" jdbcType="CHAR" />
    <result column="POS_ID" property="posId" jdbcType="CHAR" />
    <result column="POS_BATCH_ID" property="posBatchId" jdbcType="CHAR" />
    <result column="POS_SEQ_ID" property="posSeqId" jdbcType="CHAR" />
    <result column="RET_REP_TYPE" property="retRepType" jdbcType="CHAR" />
    <result column="RET_REP_AMT" property="retRepAmt" jdbcType="CHAR" />
    <result column="ORIG_ACCOUNT_DT" property="origAccountDt" jdbcType="CHAR" />
    <result column="CAP_ID" property="capId" jdbcType="CHAR" />
    <result column="OUT_FLOW_ID" property="outFlowId" jdbcType="CHAR" />
    <result column="FILE_NM" property="fileNm" jdbcType="CHAR" />
    <result column="RPT_NUM" property="rptNum" jdbcType="CHAR" />
    <result column="SUB_KEY_CD1" property="subKeyCd1" jdbcType="CHAR" />
    <result column="SUB_KEY_CD2" property="subKeyCd2" jdbcType="CHAR" />
    <result column="LAST_UPD_OPR_ID" property="lastUpdOprId" jdbcType="CHAR" />
    <result column="LAST_UPD_TXN_ID" property="lastUpdTxnId" jdbcType="CHAR" />
    <result column="LAST_UPD_TS" property="lastUpdTs" jdbcType="CHAR" />
  </resultMap>
  <sql id="Base_Column_List">
  	TRANS_BAT_NO, BUSSINESS_ACCEPT_CHANNEL,
      SYSTEM_CHANNEL, TRANS_CODE, TRANS_TYPE, ACT_NO, CUPONS_NO, PROD_TYPE, PAR_REBATE_PROP,
      ORDER_AMT, USE_AMT, MOBILE_NO, INNER_USER_NO, MER_ID, INNER_ORDER_NO, ACCOUNT_DT,
      TRANS_SYS_DT, TRANS_SYS_TM, TRANS_STA, FINACE_TYPE, USE_MARK, USR_PROV, ORIG_CUP_NO,
      ORIG_RECP, TERM_ID, POS_ID, POS_BATCH_ID, POS_SEQ_ID, RET_REP_TYPE, RET_REP_AMT,
      ORIG_ACCOUNT_DT, CAP_ID, OUT_FLOW_ID, FILE_NM, RPT_NUM, SUB_KEY_CD1, SUB_KEY_CD2,
      LAST_UPD_OPR_ID, LAST_UPD_TXN_ID, LAST_UPD_TS
  </sql>
  <sql id="Example_Where_Clause">
  	<dynamic prepend="where" >
  	1=1
  	<isNotNull property="transBatNo" prepend="and">
  	TRANS_BAT_NO=#transBatNo:char#
  	</isNotNull>
  	<isNotNull property="bussinessAcceptChannel" prepend="and">
  	BUSSINESS_ACCEPT_CHANNEL=#bussinessAcceptChannel:char#
  	</isNotNull>
  	</dynamic>
  </sql>
  <insert id="CMST_TBL_APP_MARKETING_TOOL_USEDTL.abatorgenerated_insert" parameterClass="cmt.getData.po.TblAppMarketingToolUsedtl" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Sep 05 12:46:58 CST 2013.
    -->
    insert into CMST.TBL_APP_MARKETING_TOOL_USEDTL (TRANS_BAT_NO, BUSSINESS_ACCEPT_CHANNEL,
      SYSTEM_CHANNEL, TRANS_CODE, TRANS_TYPE, ACT_NO, CUPONS_NO, PROD_TYPE, PAR_REBATE_PROP,
      ORDER_AMT, USE_AMT, MOBILE_NO, INNER_USER_NO, MER_ID, INNER_ORDER_NO, ACCOUNT_DT,
      TRANS_SYS_DT, TRANS_SYS_TM, TRANS_STA, FINACE_TYPE, USE_MARK, USR_PROV, ORIG_CUP_NO,
      ORIG_RECP, TERM_ID, POS_ID, POS_BATCH_ID, POS_SEQ_ID, RET_REP_TYPE, RET_REP_AMT,
      ORIG_ACCOUNT_DT, CAP_ID, OUT_FLOW_ID, FILE_NM, RPT_NUM, SUB_KEY_CD1, SUB_KEY_CD2,
      LAST_UPD_OPR_ID, LAST_UPD_TXN_ID, LAST_UPD_TS)
    values (#transBatNo:CHAR#, #bussinessAcceptChannel:CHAR#, #systemChannel:CHAR#,
      #transCode:CHAR#, #transType:CHAR#, #actNo:CHAR#, #cuponsNo:CHAR#, #prodType:CHAR#,
      #parRebateProp:CHAR#, #orderAmt:CHAR#, #useAmt:CHAR#, #mobileNo:CHAR#, #innerUserNo:CHAR#,
      #merId:CHAR#, #innerOrderNo:CHAR#, #accountDt:CHAR#, #transSysDt:CHAR#, #transSysTm:CHAR#,
      #transSta:CHAR#, #finaceType:CHAR#, #useMark:CHAR#, #usrProv:CHAR#, #origCupNo:CHAR#,
      #origRecp:CHAR#, #termId:CHAR#, #posId:CHAR#, #posBatchId:CHAR#, #posSeqId:CHAR#,
      #retRepType:CHAR#, #retRepAmt:CHAR#, #origAccountDt:CHAR#, #capId:CHAR#, #outFlowId:CHAR#,
      #fileNm:CHAR#, #rptNum:CHAR#, #subKeyCd1:CHAR#, #subKeyCd2:CHAR#, #lastUpdOprId:CHAR#,
      #lastUpdTxnId:CHAR#, #lastUpdTs:CHAR#)
  </insert>
  <select id="CMST_TBL_APP_MARKETING_TOOL_USEDTL.abatorgenerated_selectExample" parameterClass="java.util.ArrayList" resultClass="java.util.List">
  <![CDATA[SELECT MOBILE_NO, ACCOUNT_DT, SUM(USE_AMT)
  FROM TBL_APP_MARKETING_TOOL_USEDTL
 WHERE USE_MARK IN ('1', '2')
   AND PROD_TYPE = '0'
   AND TRANS_STA = 'S']]>
   <iterate prepend="and" property="elementData[]">
   ACCOUNT_DT BETWEEN '#str[0]:char#' AND '#str[1]:char#'
   </iterate>
   <![CDATA[
 GROUP BY MOBILE_NO, INNER_ORDER_NO, ORDER_AMT, ACCOUNT_DT
HAVING ORDER_AMT = SUM(USE_AMT)]]>
  </select>
  <!-- 测试Sql --> 
	<select id="CMST_TBL_APP_MARKETING_TOOL_USEDTL.sqlQuery" parameterClass="java.lang.Object" resultClass="java.util.HashMap" remapResults="true"> 
	<![CDATA[ 
		$sql$ 
	]]>
	</select>
</sqlMap>